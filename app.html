@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Verify Your Email Address') }}</div>

                <div class="card-body">
                    @if (session('resent'))
                        <div class="alert alert-success" role="alert">
                            {{ __('A fresh verification link has been sent to your email address.') }}
                        </div>
                    @endif

                    {{ __('Before proceeding, please check your email for a verification link.') }}
                    {{ __('If you did not receive the email') }}, <a href="{{ route('verification.resend') }}">{{ __('click here to request another') }}</a>.
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">新規登録</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('register') }}">
                        @csrf


                        <div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">メールアドレス</label>

                            <div class="col-md-6">
                                <input id="email" type="input" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}"   autocomplete="email">

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password" class="col-md-4 col-form-label text-md-right">パスワード<br>(半角英数字6文字以上20文字以下)</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password"  autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-right">パスワード（確認用）</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation"  autocomplete="new-password">
                            </div>
                        </div>

                        <div class="form-group row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    登録
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">ログイン</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('login') }}">
                        @csrf

                        <div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">メールアドレス</label>

                            <div class="col-md-6">
                                <input id="email" type="inout" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}"  autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password" class="col-md-4 col-form-label text-md-right">パスワード(半角英数字6文字以上20文字以下)</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-6 offset-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="remember" id="remember" {{ old('remember') ? 'checked' : '' }}>

                                    <label class="form-check-label" for="remember">
                                        ログイン状態を保持する
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row mb-0">
                            <div class="col-md-8 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    ログイン
                                </button>

                                @if (Route::has('password.request'))
                                    <a class="btn btn-link" href="{{ route('password.request') }}">
                                        パスワードをお忘れの方はこちら
                                    </a>
                                @endif
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">パスワード再設定</div>

                <div class="card-body">
                    @if (session('status'))
                        <div class="alert alert-success" role="alert">
                            {{ session('status') }}
                        </div>
                    @endif

                    <form method="POST" action="{{ route('password.email') }}">
                        @csrf

                        <div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">登録したメールアドレス</label>

                            <div class="col-md-6">
                                <input id="email" type="input" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}"  autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    送信
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                      <p>タイトル：{{ $parent_step_info->title }}</p>
                      <p>カテゴリー：{{ $parent_step_info->category->category_name }}</p>
                      <p>登録者：{{ $parent_step_info->user->username }}</p>
                      <p>達成目標時間：{{ $parent_step_info->goal_time }}</p>
                      <p>内容：{{ $parent_step_info->description }}</p>

                      <div class="card-header">
                        STEP{{ $challenge_child_step_info->num_child_step }}：{{ $challenge_child_step_info->childStep->step }}
                      </div>

                      <div class="card-body">
                          <div class="form-group row">
                              <div class="col-md-6">
                                  やること
                                  <p id="title"  class="form-control" >
                                    {{ $challenge_child_step_info->childStep->todo }}
                                  </p>
                              </div>
                          </div>
                      </div>


                    <div class="card-body">
                      <!-- クリアボタンが押されたら現在表示されている子ステップのidを渡す -->
                        <form method="POST" action="{{ route('challenge.clear', $challenge_child_step_info->id) }}">
                            @csrf


                            <div class="form-group row">
                              <label for="passed_time" class="col-md-4 col-form-label text-md-right">かかった時間</label>

                                <div class="col-md-6">
                                    <input id="passed_time" type="text" class="form-control @error('passed_time') is-invalid @enderror" name="passed_time" value="{{ old('passed_time') }}" autocomplete="passed_time" autofocus>時間

                                    @error('passed_time')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row mb-0">
                                <div class="col-md-6 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        クリア
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSRF Token -->
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>{{ config('app.name') }}</title>

    <!-- Scripts -->
    <script src="{{ asset('js/app.js') }}" defer></script>

    <!-- Fonts -->
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">

    <!-- Styles -->
    <link href="{{ asset('css/app.css') }}" rel="stylesheet">
</head>
<body>
    <div id="app">
        <nav class="navbar navbar-expand-md navbar-light bg-white shadow-sm">
            <div class="container">
                <a class="navbar-brand" href="{{ url('/top') }}">
                    {{ config('app.name') }}
                </a>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <!-- Left Side Of Navbar -->
                    <ul class="navbar-nav mr-auto">

                    </ul>

                    <!-- Right Side Of Nambvbar -->
                    <ul class="navbar-nav ml-auto">
                        <!-- Authentication Links -->
                        @guest
                            <li class="nav-item">
                                <a class="nav-link" href="{{ route('login') }}">ログイン</a>
                            </li>
                            @if (Route::has('register'))
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ route('register') }}">新規登録</a>
                                </li>
                            @endif
                        @else
                            <li class="nav-item dropdown">
                              <li class="nav-item">
                                  <a class="nav-link" href="/steps/new">STEP登録</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/steps">チャレンジ</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/profile/{{ Auth::id()}}/new">プロフィール登録(編集)</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/mypage/{{ Auth::id()}}">マイページ</a>
                              </li>
                                    <a class="nav-link" href="{{ route('logout') }}"
                                       onclick="event.preventDefault()
                                                     document.getElementById('logout-form').submit();">
                                        ログアウト
                                    </a>

                                    <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                                        @csrf
                                    </form>
                            </li>
                        @endguest
                    </ul>
                </div>
            </div>
        </nav>

        @if (session('flash_message'))
          <div class="alert alert-primary text-center" role="alert">
            {{ session('flash_message') }}
          </div>
        @endif

        <main class="py-4">
            @yield('content')
        </main>
    </div>
</body>
</html>
@extends('layouts.app')

@section('content')
  <h1>マイページ</h1>
    <div class="container">
      @if(($user->pic) != null)
        <div>
          <img src="/{{ str_replace('public/', 'storage/', $user->pic) }}" alt="アイコン画像" width="200" height="130">
        </div>
      @else
        <div>
          <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
        </div>
      @endif
    </p>
    <p>
      @if(($user->username)  != null)
          {{$user->username}}
      @else
          [ユーザー名未設定]
      @endif
    <p>
      <h2>登録したSTEP一覧</h2>
      <div class="row">

        @foreach ($my_create_steps as $my_create_step)

        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              @if(($my_create_step->pic) != null)
                <div>
                  <img src="/{{ str_replace('public', 'storage', $my_create_step->pic) }}" alt="ステップ画像" width="200" height="130">
                </div>
              @else
                <div>
                  <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                </div>
              @endif
              <a href="{{ action('StepsController@show', $my_create_step->id) }}">
                <h3 class="card-title">タイトル：{{ $my_create_step->title }}</h3>
              </a>
                <h3 class="card-title">カテゴリー：{{ $my_create_step->category->category_name }}</h3>
                <h3 class="card-title">達成目安時間：{{ $my_create_step->goal_time }}</h3>
            </div>
          </div>
        </div>

        @endforeach

      </div>

      <h2>チャレンジ中のSTEP一覧</h2>
      <div class="row">
        <!-- 渡された$my_challenge_stepsが空の時は何も表示しない -->
        @if(isset($my_challenge_steps[0]))
        @foreach ($my_challenge_steps as $my_challenge_step)

        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              @if(($my_challenge_step->parentStep['pic']) != null)
                <div>
                  <img src="/{{ str_replace('public', 'storage', $my_challenge_step->parentStep['pic']) }}" alt="ステップ画像" width="200" height="130">
                </div>
              @else
                <div>
                  <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                </div>
              @endif
              <a href="{{ action('ChallengeController@show', $my_challenge_step->id) }}">
                <h3 class="card-title">タイトル：{{ $my_challenge_step->parentStep['title']}}</h3>
              </a>
                <h3 class="card-title">カテゴリー：{{ $my_challenge_step->parentStep->category['category_name'] }}</h3>
                <h3 class="card-title">達成目安時間：{{ $my_challenge_step->parentStep['goal_time'] }}時間</h3>
                <h3 class="card-title">かかった時間：{{ $my_challenge_step['total_time'] }}時間</h3>
                <h3 class="card-title">進捗状況：<br>全5ステップ中{{$my_challenge_step['num_clear_child_step']}}ステップクリア！</h3>
            </div>
          </div>
        </div>

        @endforeach
        @endif
      </div>

      <h2>クリアしたSTEP一覧</h2>
      <div class="row">
        <!-- 渡された$my_finish_stepsが空の時は何も表示しない -->
        @if(isset($my_finish_steps[0]))
        @foreach ($my_finish_steps as $my_finish_step)

        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              @if(($my_finish_step->parentStep['pic']) != null)
                <div>
                  <img src="/{{ str_replace('public', 'storage', $my_finish_step->parentStep['pic']) }}" alt="ステップ画像" width="200" height="130">
                </div>
              @else
                <div>
                  <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                </div>
              @endif
                <h3 class="card-title">タイトル：{{ $my_finish_step->parentStep['title']}}</h3>
                <h3 class="card-title">カテゴリー：{{ $my_finish_step->parentStep->category['category_name'] }}</h3>
                <h3 class="card-title">達成目安時間：{{ $my_finish_step->parentStep['goal_time'] }}時間</h3>
                <h3 class="card-title">かかった時間：{{ $my_finish_step['total_time'] }}時間</h3>
            </div>
          </div>
        </div>

        @endforeach
        @endif
      </div>

    </div>

@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">プロフィール編集</div>


                    <div class="card-body">
                        <form method="POST" action="{{ route('profile.update', $user->id) }}" enctype="multipart/form-data">
                            @csrf

                            <div class="form-group row">
                                <label for="username" class="col-md-4 col-form-label text-md-right">ユーザー名(20文字以内)</label>

                                <div class="col-md-6">
                                    <input id="username" type="text" class="form-control @error('username') is-invalid @enderror" name="username" value="{{ old('username', $user->username) }}" autocomplete="username" autofocus>

                                    @error('username')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="email" class="col-md-4 col-form-label text-md-right">メールアドレス</label>

                                <div class="col-md-6">
                                    <input id="email" type="text" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email', $user->email) }}" autocomplete="email" autofocus>

                                    @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="introduction" class="col-md-4 col-form-label text-md-right">自己紹介</label>

                                <div class="col-md-6">
                                    <input id="introduction" type="textarea" class="form-control @error('introduction') is-invalid @enderror" name="introduction" value="{{ old('introduction', $user->introduction) }}" autocomplete="introduction" autofocus>

                                    @error('introduction')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <p  class="col-md-4 col-form-label text-md-right">登録したアイコン画像</p>

                                <div class="col-md-6">

                                  @if(($user->pic) != null )
                                    <div>
                                      <img src="/{{ $user->pic }}" alt="アイコン画像" width="200" height="130">
                                    </div>
                                  @else
                                    <div>
                                      <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                                    </div>
                                  @endif
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="pic" class="col-md-4 col-form-label text-md-right">新しい画像</label>

                                <div class="col-md-6">

                                    <input id="pic" type="file" class="form-control @error('pic') is-invalid @enderror" name="pic" value="{{ old('pic') }}" autocomplete="pic" autofocus>

                                    @error('pic')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>


                            <div class="form-group row mb-0">
                                <div class="col-md-6 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        編集
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">プロフィール登録</div>


                    <div class="card-body">
                        <form method="POST" action="{{ route('profile.create', $user->id) }}" enctype="multipart/form-data">
                            @csrf

                            <div class="form-group row">
                                <label for="username" class="col-md-4 col-form-label text-md-right">ユーザー名(20文字以内)</label>

                                <div class="col-md-6">
                                    <input id="username" type="text" class="form-control @error('username') is-invalid @enderror" name="username" value="{{ old('username') }}" autocomplete="username" autofocus>

                                    @error('username')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="email" class="col-md-4 col-form-label text-md-right">メールアドレス</label>

                                <div class="col-md-6">
                                    <input id="email" type="text" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email', $user->email) }}" autocomplete="title" autofocus>

                                    @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="introduction" class="col-md-4 col-form-label text-md-right">自己紹介(200文字以内)</label>

                                <div class="col-md-6">
                                    <input id="introduction" type="textarea" class="form-control @error('introduction') is-invalid @enderror" name="introduction" value="{{ old('introduction') }}" autocomplete="introduction" autofocus>

                                    @error('introduction')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>


                            <div class="form-group row">
                                <label for="pic" class="col-md-4 col-form-label text-md-right">アイコン画像：任意</label>

                                <div class="col-md-6">

                                    <input id="pic" type="file" class="form-control @error('pic') is-invalid @enderror" name="pic" value="{{ old('pic') }}" autocomplete="pic" autofocus>

                                    @error('pic')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>



                            <div class="form-group row mb-0">
                                <div class="col-md-6 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        登録
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')
  <p>
    @if(($user->pic) != null)
      <div>
        <img src="/{{ str_replace('public/', 'storage/', $user->pic) }}" alt="アイコン画像" width="200" height="130">
      </div>
    @else
      <div>
        <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
      </div>
    @endif
  </p>
  <p>
    @if(($user->username)  != null)
        {{$user->username}}さんのプロフィール
    @else
        [ユーザー名未設定]さんのプロフィール
    @endif
  <p>
  自己紹介
  <p>{{$user->introduction}}</p>
    <div class="container">
      <h2>登録したSTEP一覧</h2>
      <div class="row">

        @foreach ($my_create_steps as $my_create_step)

        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              @if(($my_create_step->pic) != null)
                <div>
                  <img src="/{{ str_replace('public', 'storage', $my_create_step->pic) }}" alt="ステップ画像" width="200" height="130">
                </div>
              @else
                <div>
                  <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                </div>
              @endif
              <a href="{{ action('StepsController@show', $my_create_step->id) }}">
                <h3 class="card-title">タイトル：{{ $my_create_step->title }}</h3>
              </a>
                <h3 class="card-title">カテゴリー：{{ $my_create_step->category->category_name }}</h3>
                <h3 class="card-title">達成目安時間：{{ $my_create_step->goal_time }}</h3>
            </div>
          </div>
        </div>

        @endforeach
      </div>


@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">STEP編集</div>

                    <p>
                      @if(($user->pic) != null)
                        <div>
                          <img src="/{{ str_replace('public/', 'storage/', $user->pic) }}" alt="アイコン画像" width="200" height="130">
                        </div>
                      @else
                        <div>
                          <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                        </div>
                      @endif
                      @if(($user->username)  != null)
                        <a href="{{ action('ProfileController@show', $user->id) }}">
                          投稿者：{{$user->username}}
                        </a>
                      @else
                        <a href="{{ action('ProfileController@show', $user->id) }}">
                          投稿者：[ユーザー名未設定]
                        </a>
                      @endif
                    </p>

                    <div class="card-body">
                        <form method="POST" action="{{ route('steps.update', $parent_step_info->id) }}" enctype="multipart/form-data">
                            @csrf

                            <div class="form-group row">
                                <label for="title" class="col-md-4 col-form-label text-md-right">タイトル(40文字以内)</label>

                                <div class="col-md-6">
                                    <input id="title" type="text" class="form-control @error('title') is-invalid @enderror" name="title" value="{{ old('title', $parent_step_info->title) }}" autocomplete="title" autofocus>

                                    @error('title')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="category_id" class="col-md-4 col-form-label text-md-right">カテゴリー</label>

                                <div class="col-md-6">
                                    <select id="category_id" type="text" class="form-control @error('category_id') is-invalid @enderror" name="category_id"  autocomplete="category_id" autofocus>
                                      @foreach($categories as $category )
                                      @if($category->id == $parent_step_info->category_id )
                                      <option value="{{ $category->id }}"  selected = "selcted" > {{ $category->category_name}} </option>
                                      @elseif(old('category_id') == $category->id )
                                      <option value="{{$category->id}}" selected = "selcted"> {{ $category->category_name}} </option>
                                      @else
                                      <option value="{{$category->id}}"> {{ $category->category_name}} </option>
                                      @endif
                                      @endforeach
                                    </select>


                                    @error('category_id')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="goal_time" class="col-md-4 col-form-label text-md-right">達成目安時間</label>

                                <div class="col-md-6">
                                    <input id="goal_time" type="text" class="form-control @error('goal_time') is-invalid @enderror" name="goal_time" value="{{ old('goal_time', $parent_step_info->goal_time) }}" autocomplete="goal_time" autofocus>時間

                                    @error('goal_time')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="description" class="col-md-4 col-form-label text-md-right">説明(200文字以内)</label>

                                <div class="col-md-6">
                                    <input id="description" type="textarea" class="form-control @error('description') is-invalid @enderror" name="description" value="{{ old('description', $parent_step_info->description) }}" autocomplete="description" autofocus>

                                    @error('description')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            @for ($i = 1; $i <= 5; $i++)
                              <div class="form-group row">

                                <label for="step{{$i - 1}}" class="col-md-4 col-form-label text-md-right">{{ __('子STEP').$i }} </label>

                                <div class="col-md-6">
                                  <input id="step{{$i - 1}}" type="text" class="form-control  @error('step'.($i - 1)) is-invalid @enderror" name="step{{$i - 1}}" value="{{ old('step'.($i - 1), $child_step_info[$i - 1]['step']) }} " autocomplete="step{{$i - 1}}" autofocus>

                                  @error('step'.($i - 1))
                                  <span class="invalid-feedback" role="alert">
                                    <strong>{{ $message }}</strong>
                                  </span>
                                  @enderror
                                </div>

                                <label for="todo{{$i - 1}}" class="col-md-4 col-form-label text-md-right">やること(100文字以内) </label>

                                <div class="col-md-6">
                                    <input id="todo{{$i - 1}}" type="textarea" class="form-control @error('todo'.($i - 1)) is-invalid @enderror" name="todo{{$i - 1}}" value="{{ old('todo'.($i - 1), $child_step_info[$i - 1]['todo']) }}" autocomplete="todo{{$i - 1}}" autofocus>

                                    @error('todo'.($i - 1))
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>

                              </div>

                            @endfor

                            <div class="form-group row">
                                <p  class="col-md-4 col-form-label text-md-right">登録した画像</p>

                                <div class="col-md-6">

                                  @if(($parent_step_info->pic) != null)
                                    <div>
                                      <img src="/{{ $parent_step_info->pic }}" alt="ステップ画像" width="200" height="130">
                                    </div>
                                  @else
                                    <div>
                                      <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                                    </div>
                                  @endif
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="pic" class="col-md-4 col-form-label text-md-right">新しい画像</label>

                                <div class="col-md-6">

                                    <input id="pic" type="file" class="form-control @error('pic') is-invalid @enderror" name="pic" value="{{ old('pic') }}" autocomplete="pic" autofocus>

                                    @error('pic')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>



                            <div class="form-group row mb-0">
                                <div class="col-md-6 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        編集
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('子STEP詳細') }}</div>

                    @for ($i = 1; $i <= 5; $i++)
                    <div class="card-body text-center">
                      <p>子STEP{{ $i }}：{{ $child_step[$i - 1]['step'] }}</p>
                    </div>
                    <div class="card-body text-center">
                      <p>やること：{{ $child_step[$i - 1]['todo'] }}</p>
                    </div>
                    @endfor
                    <!-- 親STEPに紐づいた子STEPのparent_step_idは全て同一なので0番目の配列から取得 -->
                    <a href="{{ action('StepsController@show', $child_step[0]->parent_step_id) }}">
                      STEP詳細に戻る
                    </a>

                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
      <h2>STEP一覧</h2>
      <div class="row">

        @foreach ($index_steps as $one_step)

        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              @if(($one_step->pic) != null)
                <div>
                  <img src="{{ str_replace('public/', 'storage/', $one_step->pic) }}" alt="ステップ画像" width="200" height="130">
                </div>
              @else
                <div>
                  <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                </div>
              @endif
              <a href="{{ action('StepsController@show', $one_step->id) }}">
                <h3 class="card-title">タイトル：{{ $one_step->title }}</h3>
              </a>
                <h3 class="card-title">カテゴリー：{{ $one_step->category->category_name }}</h3>
                <h3 class="card-title">達成目安時間：{{ $one_step->goal_time }}時間</h3>
            </div>
          </div>
        </div>

        @endforeach

      </div>
    </div>

    {{ $index_steps->links() }}
@endsection
@extends('layouts.app')

@section('content')

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('STEP詳細') }}</div>

                    <p>
                      @if(($user->pic) != null)
                        <div>
                          <img src="/{{ str_replace('public/', 'storage/', $user->pic) }}" alt="アイコン画像" width="200" height="130">
                        </div>
                      @else
                        <div>
                          <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
                        </div>
                      @endif
                      @if(($user->username)  != null)
                        <a href="{{ action('ProfileController@show', $user->id) }}">
                          投稿者：{{$user->username}}
                        </a>
                      @else
                        <a href="{{ action('ProfileController@show', $user->id) }}">
                          投稿者：[ユーザー名未設定]
                        </a>
                      @endif
                    </p>
                    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                    <p>タイトル：{{ $parent_step->title }}</p>
                    <p>カテゴリー：{{ $parent_step->category->category_name }}</p>
                    <p>達成目安時間：{{ $parent_step->goal_time }}時間</p>
                    <p>内容：{{ $parent_step->description }}</p>
                    <p>子STEP一覧</p>
                    <a href="{{ action('StepsController@detail', $parent_step->id) }}">
                      子STEP詳細はこちら
                    </a>
                    @for ($i = 1; $i <= 5; $i++)
                    <div class="card-body text-center">
                      <p>子STEP{{ $i }}：{{ $child_step[$i - 1]['step']}}</p>
                    </div>
                    @endfor

                    <div class="form-group row mb-0">
                        <div class="col-md-6 offset-md-4">
                          <a href="{{ action('ChallengeController@create', $parent_step->id) }}">
                            <button type="submit" class="btn btn-primary">
                                チャレンジ
                            </button>
                          </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">STEP新規登録</div>


                    <div class="card-body">
                        <form method="POST" action="{{ route('steps.create') }}" enctype="multipart/form-data">
                            @csrf

                            <div class="form-group row">
                                <label for="title" class="col-md-4 col-form-label text-md-right">タイトル(40文字以内)</label>

                                <div class="col-md-6">
                                    <input id="title" type="text" class="form-control @error('title') is-invalid @enderror" name="title" value="{{ old('title') }}" autocomplete="title" autofocus>

                                    @error('title')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="category_id" class="col-md-4 col-form-label text-md-right">カテゴリー</label>

                                <div class="col-md-6">
                                    <select id="category_id" type="text" class="form-control @error('category_id') is-invalid @enderror" name="category_id"  autocomplete="category_id" autofocus>
                                      <option  value="0">選択してください</option>
                                      @foreach($categories as $category )
                                      @if(old('category_id') == $category->id )
                                      <option value="{{ $category->id }}"  selected = "selcted" > {{ $category->category_name}} </option>
                                      @else
                                      <option value="{{$category->id}}"> {{ $category->category_name}} </option>
                                      @endif
                                      @endforeach
                                    </select>


                                    @error('category_id')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="goal_time" class="col-md-4 col-form-label text-md-right">達成目安時間</label>

                                <div class="col-md-6">
                                    <input id="goal_time" type="text" class="form-control @error('goal_time') is-invalid @enderror" name="goal_time" value="{{ old('goal_time') }}" autocomplete="goal_time" autofocus>時間

                                    @error('goal_time')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="description" class="col-md-4 col-form-label text-md-right">説明(200文字以内)</label>

                                <div class="col-md-6">
                                    <input id="description" type="textarea" class="form-control @error('description') is-invalid @enderror" name="description" value="{{ old('description') }}" autocomplete="description" autofocus>

                                    @error('description')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>

                                @for ($i = 1; $i <= 5; $i++)
                                  <div class="form-group row">

                                    <label for="step{{$i - 1}}" class="col-md-4 col-form-label text-md-right">{{ __('子STEP').$i }} </label>

                                    <div class="col-md-6">
                                      <input id="step{{$i - 1}}" type="text" class="form-control  @error('step'.($i - 1)) is-invalid @enderror" name="step{{$i - 1}}" value="{{ old('step'.($i - 1)) }} " autocomplete="step{{$i - 1}}" autofocus>

                                      @error('step'.($i - 1))
                                      <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                      </span>
                                      @enderror
                                    </div>

                                    <label for="todo{{$i - 1}}" class="col-md-4 col-form-label text-md-right">やること(100文字以内) </label>

                                    <div class="col-md-6">
                                        <input id="todo{{$i - 1}}" type="textarea" class="form-control @error('todo'.($i - 1)) is-invalid @enderror" name="todo{{$i - 1}}" value="{{ old('todo'.($i - 1)) }}" autocomplete="todo{{$i - 1}}" autofocus>

                                        @error('todo'.($i - 1))
                                        <span class="invalid-feedback" role="alert">
                                            <strong>{{ $message }}</strong>
                                        </span>
                                        @enderror
                                    </div>

                                  </div>

                                @endfor





                            <div class="form-group row">
                                <label for="pic" class="col-md-4 col-form-label text-md-right">画像：任意</label>

                                <div class="col-md-6">

                                    <input id="pic" type="file" class="form-control @error('category_name') is-invalid @enderror" name="pic" value="{{ old('pic') }}" autocomplete="pic" autofocus>

                                    @error('pic')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                    @enderror
                                </div>
                            </div>



                            <div class="form-group row mb-0">
                                <div class="col-md-6 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        登録
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
@extends('layouts.app')

@section('content')
<p>トップ画像</p>

<h2>新着STEP一覧</h2>
<div class="row">

  @foreach ($latest_parent_steps as $latest_parent_step)

  <div class="col-sm-6">
    <div class="card">
      <div class="card-body">
        @if(($latest_parent_step->pic) != null)
          <div>
            <img src="/{{ str_replace('public', 'storage', $latest_parent_step->pic) }}" alt="ステップ画像" width="200" height="130">
          </div>
        @else
          <div>
            <img src="{{ asset('/img/no_image.jpg') }}" alt="登録画像なし" width="200" height="130">
          </div>
        @endif
        <a href="{{ action('StepsController@show', $latest_parent_step->id) }}">
          <h3 class="card-title">タイトル：{{ $latest_parent_step->title }}</h3>
        </a>
          <h3 class="card-title">カテゴリー：{{ $latest_parent_step->category->category_name }}</h3>
          <h3 class="card-title">達成目安時間：{{ $latest_parent_step->goal_time }}</h3>
      </div>
    </div>
  </div>

  @endforeach

@endsection
